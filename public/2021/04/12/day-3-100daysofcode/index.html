<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Day 3 of 100DaysOfCode - Continuing the Tracker | phil.mk</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Day 3 of 100DaysOfCode - Continuing the Tracker</h1><a id="logo" href="/.">phil.mk</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Day 3 of 100DaysOfCode - Continuing the Tracker</h1><div class="post-meta">2021-04-12</div><div class="post-content"><p>Having <a href="https://phil.mk/">the blog</a> up on Hexo ready to go, the focus of today was spent mostly on the cryptocurrency portfolio tracker.</p>
<p>I have found myself throwing money into a bunch of random DeFi projects, which means that keeping track of all of these various tokens and pools that I’ve joined a bit more difficult.</p>
<p>Thankfully, the PancakeSwap API makes it fairly easy to pull up almost any token that is out there, assuming it’s listed on PancakeSwap.</p>
<p>I ended up spending some extra time on the initial search for a token, such as allowing the user to input ‘tokens’ to see a list of everything listed on PancakeSwap, and adding some error handling to make sure that the user is typing in the name of a token correctly. Eventually, I realized that it would make more sense to create functions, as it was becoming a bit of a mess to navigate.</p>
<p>Here’s what I had before I ended up starting over and going down the function route:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> x == <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>: </span><br><span class="line">        token_price = <span class="built_in">input</span>(<span class="string">&quot;\nWhich token did you want to check the price? For example: CUB.\n&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;The price of $<span class="subst">&#123;token_price&#125;</span> is currently <span class="subst">&#123;current_prices[<span class="string">&#x27;prices&#x27;</span>][<span class="built_in">str</span>(token_price.upper())]&#125;</span>.\n&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> KeyError:</span><br><span class="line">        <span class="keyword">if</span> token_price == <span class="string">&#x27;tokens&#x27;</span>:</span><br><span class="line">            ltrs = <span class="built_in">input</span>(<span class="string">&quot;This is a long list. You can type in a letter to view all tokens that start with that letter, or simply press Enter or Return to view the entire list.&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> ltrs.isalpha():</span><br><span class="line">                <span class="keyword">for</span> tkns <span class="keyword">in</span> current_prices[<span class="string">&#x27;prices&#x27;</span>]:</span><br><span class="line">                    <span class="keyword">if</span> tkns[<span class="number">0</span>] == ltrs:</span><br><span class="line">                        <span class="built_in">print</span>(tkns)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">for</span> tkns <span class="keyword">in</span> current_prices[<span class="string">&#x27;prices&#x27;</span>]:</span><br><span class="line">                    <span class="built_in">print</span>(tkns)</span><br><span class="line">        <span class="keyword">elif</span> token_price == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;token_price&#125;</span> doesn&#x27;t seem to be a valid token. Please try again. For a list of tokens currently on PancakeSwap, type &#x27;tokens&#x27;.&quot;</span>)</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>Unfortunately, the PancakeSwap API managed to go down on me, but I was able to get this far:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">price_check_BSC</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Checks the current price of a BSC token on PancakeSwap.&quot;&quot;&quot;</span> </span><br><span class="line">    token_name = <span class="built_in">input</span>(<span class="string">&quot;What token would you like to check the price of today? As an example, you can enter &#x27;CUB&#x27;.&quot;</span>)</span><br><span class="line">    pancakeswap_response = requests.get(<span class="string">&#x27;https://api.pancakeswap.finance/api/v1/price&#x27;</span>)</span><br><span class="line">    pancakeswap_prices = pancakeswap_response.json()  </span><br><span class="line">    token_price = pancakeswap_prices[<span class="string">&#x27;prices&#x27;</span>][<span class="built_in">str</span>(token_name.upper())]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;The value of <span class="subst">&#123;token_name&#125;</span> is currently <span class="subst">&#123;token_price&#125;</span>.&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>I’m planning on having token_name be its own function, which would make sure that the user input is correct, and handles any errors that come out.</p>
<p>The CoinGecko API includes far more information than the PancakeSwap API (<a target="_blank" rel="noopener" href="https://api.coingecko.com/api/v3/coins/ethereum/contract/0x73A9fb46e228628f8f9BB9004eCa4f4F529D3998">WLEO example</a>), which made finding the price a bit more difficult. My first step was to use the keys() method on the call, to figure out how exactly this information is organized. I was viewing this in my web browser, but maybe there’s a way to have a cleaner view. For now, this did get the job done.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(coingecko_prices.keys())</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dict_keys([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;symbol&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;asset_platform_id&#x27;</span>, <span class="string">&#x27;platforms&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;block_time_in_minutes&#x27;</span>, <span class="string">&#x27;hashing_algorithm&#x27;</span>, <span class="string">&#x27;categories&#x27;</span>, <span class="string">&#x27;public_notice&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;additional_notices&#x27;</span>, <span class="string">&#x27;localization&#x27;</span>, <span class="string">&#x27;description&#x27;</span>, <span class="string">&#x27;links&#x27;</span>, <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;country_origin&#x27;</span>, <span class="string">&#x27;genesis_date&#x27;</span>, <span class="string">&#x27;contract_address&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;sentiment_votes_up_percentage&#x27;</span>, <span class="string">&#x27;sentiment_votes_down_percentage&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;market_cap_rank&#x27;</span>, <span class="string">&#x27;coingecko_rank&#x27;</span>, <span class="string">&#x27;coingecko_score&#x27;</span>, <span class="string">&#x27;developer_score&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;community_score&#x27;</span>, <span class="string">&#x27;liquidity_score&#x27;</span>, <span class="string">&#x27;public_interest_score&#x27;</span>, <span class="string">&#x27;market_data&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;community_data&#x27;</span>, <span class="string">&#x27;developer_data&#x27;</span>, <span class="string">&#x27;public_interest_stats&#x27;</span>, <span class="string">&#x27;status_updates&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;last_updated&#x27;</span>, <span class="string">&#x27;tickers&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>Eventually, I was able to find the current price within CoinGeckos API by going through market_data &gt; current_price &gt; usd. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">price_check_CG</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Checks the current price of a token on CoinGecko.&quot;&quot;&quot;</span></span><br><span class="line">    token_address_request = <span class="built_in">input</span>(<span class="string">&quot;What token would you like to check the price of today? As an example, you can type&#x27;0x73A9fb46e228628f8f9BB9004eCa4f4F529D3998&#x27; for WLEO.&quot;</span>)</span><br><span class="line">    coingecko_response = requests.get((<span class="string">&#x27;https://api.coingecko.com/api/v3/coins/ethereum/contract/&#x27;</span> + <span class="built_in">str</span>(token_address_request)))</span><br><span class="line">    coingecko_prices = coingecko_response.json()</span><br><span class="line">    token_name = coingecko_prices.get(<span class="string">&#x27;symbol&#x27;</span>)</span><br><span class="line">    token_price = coingecko_prices[<span class="string">&#x27;market_data&#x27;</span>][<span class="string">&#x27;current_price&#x27;</span>][<span class="string">&#x27;usd&#x27;</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;The value of <span class="subst">&#123;token_name.upper()&#125;</span> is currently <span class="subst">&#123;token_price&#125;</span>.&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>Similar to the BSC version, I would like to have token_name be its own function. In addition, trying to get contract addresses can be a hassle, so I’d rather be able to type ‘WLEO’ instead of ‘0x73A9fb46e228628f8f9BB9004eCa4f4F529D3998’ and get the correct price. My fairly basic ‘fix’ is to pick the coin with the highest market cap that matches the symbol that the user inputs.</p>
<p>Some useful links I came across today:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://realpython.com/python-keyerror/">Handling KeyErrors in Python</a></li>
</ul>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2021/04/13/day-4-100daysofcode/">Day 4 of 100DaysOfCode - Getting Away from Token Addresses</a><a class="next" href="/2021/04/09/day-2-100dayofcode/">Day 2 of 100DaysOfCode - Getting Started with Hexo</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://phil.mk"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/development/">development</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/100daysofcode/" style="font-size: 15px;">100daysofcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/04/16/day-5-100daysofcode/">Day 5 of 100DaysOfCode - Handling Inputs</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/13/day-4-100daysofcode/">Day 4 of 100DaysOfCode - Getting Away from Token Addresses</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/12/day-3-100daysofcode/">Day 3 of 100DaysOfCode - Continuing the Tracker</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/09/day-2-100dayofcode/">Day 2 of 100DaysOfCode - Getting Started with Hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/08/day-1-100daysofcode/">Day 1 of 100DaysOfCode - First Steps</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/08/restarting-the-blog-on-hexo/">Restarting the Blog on Hexo</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">phil.mk.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>